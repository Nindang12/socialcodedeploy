(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1689:(e,t,a)=>{Promise.resolve().then(a.bind(a,4083))},4083:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),r=a(4416),l=a(7213),o=a(9803);let i=(0,a(9946).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var n=a(1976),c=a(1366),d=a(1335),u=a(2115),h=a(5695),m=a(3464),p=a(6874),x=a.n(p);let g=[{post_id:1,user_id:1,avatar:"https://placehold.co/40x40",username:"username",time:"19 giờ",content:"content",image:"https://placehold.co/500x200",likes:474,comments:3,reposts:27,saves:8},{post_id:2,user_id:2,avatar:"https://placehold.co/40x40",username:"username",time:"1 ng\xe0y",content:"content",image:"https://placehold.co/500x200",likes:320,comments:5,reposts:15,saves:6},{post_id:3,user_id:3,avatar:"https://placehold.co/40x40",username:"randomuser",time:"2 ng\xe0y",content:"Just finished my first marathon! \uD83C\uDFC3‍♂️",image:"https://placehold.co/500x200",likes:289,comments:12,reposts:9,saves:4}];function f(){let e=(0,h.useRouter)(),[t,a]=(0,u.useState)(!1),[i,n]=(0,u.useState)(""),[c,d]=(0,u.useState)(null),[p,x]=(0,u.useState)(null),[f,b]=(0,u.useState)(g),y=e=>{let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/6e4);if(s<60)return"".concat(s," ph\xfat");if(s<1440){let e=Math.floor(s/60);return"".concat(e," giờ")}{let e=Math.floor(s/1440);return"".concat(e," ng\xe0y")}},[j,w]=(0,u.useState)(null);(0,u.useEffect)(()=>{(async()=>{try{let t=localStorage.getItem("token");if(!t){e.push("/login");return}let a=await m.A.get("http://127.0.0.1:8000/users/me",{headers:{Authorization:"Bearer ".concat(t)}});w(a.data.user)}catch(a){var t;console.error("Error fetching current user:",a),(null===(t=a.response)||void 0===t?void 0:t.status)===401&&e.push("/login")}})()},[e]),(0,u.useEffect)(()=>{(async()=>{try{let t=localStorage.getItem("token");if(!t){e.push("/login");return}let a=await m.A.get("http://127.0.0.1:8000/posts",{headers:{Authorization:"Bearer ".concat(t)}}),s=await Promise.all(a.data.map(async e=>{try{var a,s;let r=await m.A.get("http://127.0.0.1:8000/users/".concat(e.user_id),{headers:{Authorization:"Bearer ".concat(t)}}),l=(null===(a=r.data.user)||void 0===a?void 0:a.username)||"user_".concat(e.user_id),o=null===(s=r.data.user)||void 0===s?void 0:s.avatar,i=e.image_id?"http://127.0.0.1:8000/media/".concat(e.image_id):"",n=e.video_id?"http://127.0.0.1:8000/media/".concat(e.video_id):"";return{...e,time:y(e.created_at),avatar:o||"https://placehold.co/40x40?text=".concat(e.user_id),username:l,image:i,video:n,liked_by:e.liked_by||[],reposted_by:e.reposted_by||[]}}catch(t){return console.error("Error fetching user:",t),{...e,time:y(e.created_at),avatar:"https://placehold.co/40x40?text=".concat(e.user_id),username:"user_".concat(e.user_id),image:"",video:"",liked_by:[],reposted_by:[]}}}));b(s)}catch(a){var t;console.error("Error fetching posts:",a),(null===(t=a.response)||void 0===t?void 0:t.status)===401&&e.push("/login")}})()},[e]);let k=async()=>{if(i.trim())try{let t=localStorage.getItem("token");if(!t){e.push("/login");return}let s=new FormData;s.append("content",i),c&&s.append("image",c),p&&s.append("video",p);let r=await m.A.post("http://127.0.0.1:8000/posts",s,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"}}),l=(await m.A.get("http://127.0.0.1:8000/users/".concat(r.data.user_id),{headers:{Authorization:"Bearer ".concat(t)}})).data.user,o=l.avatar?l.avatar:"https://placehold.co/40x40?text=".concat(l.username),u={...r.data,time:y(r.data.created_at),avatar:o,username:l.username,image:r.data.image_id?"http://127.0.0.1:8000/media/".concat(r.data.image_id):"",video:r.data.video_id?"http://127.0.0.1:8000/media/".concat(r.data.video_id):"",likes:"number"==typeof r.data.likes?r.data.likes:0,comments:"number"==typeof r.data.comments?r.data.comments:0,reposts:"number"==typeof r.data.reposts?r.data.reposts:0,saves:"number"==typeof r.data.saves?r.data.saves:0,liked_by:[],reposted_by:[]};b(e=>[u,...e]),n(""),d(null),x(null),a(!1)}catch(a){var t;console.error("Error creating post:",a),(null===(t=a.response)||void 0===t?void 0:t.status)===401&&e.push("/login")}};return(0,s.jsxs)("div",{className:"w-full h-screen bg-gray-100 flex flex-col items-center p-4",children:[(0,s.jsx)("h1",{className:"text-xl text-black font-bold mb-4",children:"Trang chủ"}),(0,s.jsx)("div",{className:"max-w-xl w-full h-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 border-b pb-3",onClick:()=>a(e=>!e),children:[(0,s.jsx)("img",{src:(null==j?void 0:j.avatar)?"http://127.0.0.1:8000/media/".concat(j.avatar):"https://placehold.co/40x40",alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"C\xf3 g\xec mới?",className:"flex-1 p-2 border rounded-lg text-black focus:outline-none"}),(0,s.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold",children:"Đăng"})]})]}),t&&(0,s.jsx)("div",{className:"fixed  inset-0 h-full flex text-black items-center justify-center bg-black/50 z-50",children:(0,s.jsxs)("div",{className:"bg-white w-[600px]  rounded-2xl shadow-lg p-4 translate-x-10",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center border-b pb-2",children:[(0,s.jsx)("button",{className:"text-gray-600 hover:text-black",children:(0,s.jsx)(r.A,{size:22,onClick:()=>{a(!1)},className:"cursor-pointer"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Thread mới"}),(0,s.jsx)("div",{})]}),(0,s.jsxs)("div",{className:"p-3 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("img",{src:(null==j?void 0:j.avatar)?"http://127.0.0.1:8000/media/".concat(j.avatar):"https://placehold.co/40x40",alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("p",{className:"text-sm font-semibold",children:[(null==j?void 0:j.username)||"Loading..."," ",(0,s.jsx)("span",{className:"text-gray-500",children:"› Th\xeam chủ đề"})]}),(0,s.jsx)("textarea",{className:"w-full mt-1 p-2 text-sm border-none outline-none resize-none",rows:2,placeholder:"C\xf3 g\xec mới?",value:i,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&i.trim()&&(e.preventDefault(),k())}})]})]}),(0,s.jsxs)("div",{className:"flex items-center text-gray-500 space-x-4",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)(l.A,{size:20,className:"cursor-pointer hover:text-black"}),(0,s.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:e=>{e.target.files&&e.target.files[0]&&d(e.target.files[0])}})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)(o.A,{size:20,className:"cursor-pointer hover:text-black"}),(0,s.jsx)("input",{type:"file",accept:"video/*",style:{display:"none"},onChange:e=>{e.target.files&&e.target.files[0]&&x(e.target.files[0])}})]}),(c||p)&&(0,s.jsx)("button",{type:"button",onClick:()=>{d(null),x(null)},className:"ml-2 text-red-500",children:"X\xf3a file"})]}),c&&(0,s.jsxs)("div",{className:"relative w-32 h-20 mt-2",children:[(0,s.jsx)("img",{src:URL.createObjectURL(c),alt:"preview",className:"w-full h-full object-cover rounded"}),(0,s.jsx)("button",{type:"button",className:"absolute top-0 right-0 bg-white rounded-full p-0.5 text-xs text-red-500 border border-gray-300 hover:bg-gray-200",onClick:()=>d(null),children:"\xd7"})]}),p&&(0,s.jsxs)("div",{className:"relative w-40 h-24 mt-2",children:[(0,s.jsx)("video",{src:URL.createObjectURL(p),className:"w-full h-full object-cover rounded",controls:!0}),(0,s.jsx)("button",{type:"button",className:"absolute top-0 right-0 bg-white rounded-full p-0.5 text-xs text-red-500 border border-gray-300 hover:bg-gray-200",onClick:()=>x(null),children:"\xd7"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,s.jsx)("button",{className:"text-gray-500 text-sm",children:"Bất kỳ ai cũng c\xf3 thể trả lời v\xe0 tr\xedch dẫn"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-lg font-semibold ".concat(i.trim()?"bg-blue-500 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),disabled:!i.trim(),onClick:k,children:"Đăng"})]})]})]})}),(0,s.jsx)("div",{className:"space-y-4 max-h-[75vh] overflow-y-auto",children:f.map(e=>(0,s.jsx)(v,{...e,setLocalPosts:b,currentUser:j},e.post_id))})]})})]})}function v(e){let{post_id:t,user_id:a,avatar:m,username:p,time:g,content:f,image:v,video:y,likes:j,comments:w,reposts:k,saves:N,liked_by:_=[],reposted_by:S=[],setLocalPosts:A,currentUser:C}=e,[z,E]=(0,u.useState)(!1),[T,B]=(0,u.useState)(!1),[L,P]=(0,u.useState)(j),[F,R]=(0,u.useState)(!1),[O,U]=(0,u.useState)(k),[D,M]=(0,u.useState)(""),[I,W]=(0,u.useState)(w),[H,K]=(0,u.useState)(!1),[X,J]=(0,u.useState)(!1),[V,q]=(0,u.useState)(f),[G,Q]=(0,u.useState)(!1),Y=(0,h.useRouter)(),Z=localStorage.getItem("token"),[$,ee]=(0,u.useState)(""),et=(0,u.useRef)(null),[ea,es]=(0,u.useState)(!1),[er,el]=(0,u.useState)(null),[eo,ei]=(0,u.useState)(null);(0,u.useEffect)(()=>{(async()=>{if(Z&&a&&(null==C?void 0:C.user_id)&&String(a)!==String(C.user_id))try{let t=await fetch("http://127.0.0.1:8000/users/".concat(a),{headers:{Authorization:"Bearer ".concat(Z)}});if(t.ok){var e;let a=await t.json(),s=((null===(e=a.user)||void 0===e?void 0:e.followers)||[]).map(e=>String(e).trim()).includes(String(C.user_id).trim());Q(s)}}catch(e){console.error("Error checking follow status:",e)}})()},[Z,a,C]),(0,u.useEffect)(()=>{t&&Z&&C&&(async()=>{try{let e=await fetch("http://127.0.0.1:8000/posts/".concat(t),{headers:{Authorization:"Bearer ".concat(Z)},credentials:"include"});if(!e.ok)return;let a=await e.json();if(a&&Array.isArray(a.liked_by)){let e=a.liked_by.map(e=>String(e).trim()).includes(String(C.user_id).trim());B(e),P(a.likes)}if(a&&Array.isArray(a.reposted_by)){let e=a.reposted_by.map(e=>String(e).trim()).includes(String(C.user_id).trim());R(e),U(a.reposts)}}catch(e){console.error("Failed to fetch post:",e)}})()},[t,Z,C]);let en=async()=>{try{if(!Z||!C)return;let a=await fetch("http://127.0.0.1:8000/posts/".concat(t,"/like"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)}});if(!a.ok)throw Error("Failed to like post");let s=await a.json();if(s&&s.liked_by){var e;let t=s.liked_by.map(e=>String(e).trim()).includes(String(C.user_id).trim());B(t),P(null!==(e=s.likes)&&void 0!==e?e:0)}}catch(e){console.error("Error liking post:",e)}},ec=async()=>{try{let a=localStorage.getItem("token"),s=await fetch("http://127.0.0.1:8000/posts/".concat(t,"/repost"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});if(!s.ok)throw Error("Failed to repost");let r=await s.json();if(r&&r.reposted_by&&C){var e;let t=r.reposted_by.map(e=>String(e).trim()).includes(String(C.user_id).trim());R(t),U(null!==(e=r.reposts)&&void 0!==e?e:0)}}catch(e){console.error("Error reposting:",e)}},ed=async()=>{try{let e=new FormData;e.append("content",D),er&&e.append("image",er),eo&&e.append("video",eo);let a=await fetch("http://127.0.0.1:8000/posts/".concat(t,"/comment"),{method:"POST",headers:{Authorization:"Bearer ".concat(Z)},body:e});if(a.ok){let e=await a.json();W(t=>e.comments?e.comments:t+1),M(""),el(null),ei(null),E(!1)}else console.error("Failed to comment on post:",a.status)}catch(e){console.error("Error commenting on post:",e)}},eu=async()=>{try{let e=new FormData;e.append("content",V);let a=await fetch("http://127.0.0.1:8000/posts/".concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(Z)},body:e});if(a.ok)J(!1),ee(""),A(e=>e.map(e=>e.post_id===t?{...e,content:V}:e));else{let e=await a.json();e.detail?ee(e.detail):ee("C\xf3 lỗi xảy ra khi chỉnh sửa b\xe0i viết."),console.error("Failed to edit post:",a.status)}}catch(e){ee("C\xf3 lỗi xảy ra khi chỉnh sửa b\xe0i viết."),console.error("Error editing post:",e)}},eh=async()=>{try{let e=await fetch("http://127.0.0.1:8000/posts/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(Z)}});if(e.ok)ee(""),console.log("Post deleted successfully"),A(e=>e.filter(e=>e.post_id!==t));else{let t=await e.json();t.detail?ee(t.detail):ee("C\xf3 lỗi xảy ra khi x\xf3a b\xe0i viết."),console.error("Failed to delete post:",e.status)}}catch(e){ee("C\xf3 lỗi xảy ra khi x\xf3a b\xe0i viết."),console.error("Error deleting post:",e)}},em=async()=>{if(Z&&a&&(null==C?void 0:C.user_id)&&String(a)!==String(C.user_id)){es(!0);try{var e,t;let s=await fetch("http://127.0.0.1:8000/users/".concat(a),{headers:{Authorization:"Bearer ".concat(Z)}});if(s.ok){let t=await s.json();if(((null===(e=t.user)||void 0===e?void 0:e.followers)||[]).map(e=>String(e).trim()).includes(String(C.user_id).trim())){console.log("Already following this user"),Q(!0),es(!1);return}}let r=await fetch("http://127.0.0.1:8000/users/".concat(a,"/follow"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)}});if(r.ok){let e=await r.json(),a=((null===(t=e.user)||void 0===t?void 0:t.followers)||[]).map(e=>String(e).trim()).includes(String(C.user_id).trim());Q(a)}}catch(e){console.error("Error following user:",e)}finally{es(!1)}}},ep=async()=>{if(Z&&a&&(null==C?void 0:C.user_id)&&String(a)!==String(C.user_id)){es(!0);try{var e,t;let s=await fetch("http://127.0.0.1:8000/users/".concat(a),{headers:{Authorization:"Bearer ".concat(Z)}});if(s.ok){let t=await s.json();if(!((null===(e=t.user)||void 0===e?void 0:e.followers)||[]).map(e=>String(e).trim()).includes(String(C.user_id).trim())){console.log("Not following this user"),Q(!1),es(!1);return}}let r=await fetch("http://127.0.0.1:8000/users/".concat(a,"/unfollow"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)}});if(r.ok){let e=await r.json(),a=((null===(t=e.user)||void 0===t?void 0:t.followers)||[]).map(e=>String(e).trim()).includes(String(C.user_id).trim());Q(a)}}catch(e){console.error("Error unfollowing user:",e)}finally{es(!1)}}};return(0,u.useEffect)(()=>{if(H)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)};function e(e){et.current&&!et.current.contains(e.target)&&K(!1)}},[H]),console.log("Render Heart, liked:",T),(0,s.jsxs)("div",{className:"bg-white text-black p-4 shadow-md w-full rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex justify-between relative",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("img",{src:m&&!m.startsWith("http")?"http://127.0.0.1:8000/media/".concat(m,"?").concat(Date.now()):m||"https://placehold.co/40x40?text=".concat(p),alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x(),{href:"/profile/".concat(a),children:(0,s.jsx)("span",{className:"text-sm font-semibold text-black hover:underline cursor-pointer",children:p})}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:g})]}),String(a)!==String(null==C?void 0:C.user_id)&&(0,s.jsx)("button",{onClick:G?ep:em,className:"flex items-center gap-1 text-xs px-3 py-1 rounded-full font-medium transition-colors duration-150 ".concat(G?"bg-gray-200 hover:bg-gray-300 text-gray-800":"bg-blue-500 hover:bg-blue-600 text-white"," ").concat(ea?"opacity-60 cursor-not-allowed":""),disabled:ea,children:ea?(0,s.jsx)("span",{className:"loader w-3 h-3 border-2 border-t-2 border-gray-400 rounded-full animate-spin"}):G?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{stroke:"#16a34a",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Đang theo d\xf5i"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{stroke:"#2563eb",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Theo d\xf5i"]})})]})})]}),(0,s.jsx)("div",{className:"hover:bg-gray-100 p-2 rounded-full flex justify-center items-center w-8 h-8",onClick:e=>{e.stopPropagation()},children:(0,s.jsx)(i,{size:20,className:"cursor-pointer hover:text-black",onClick:()=>K(e=>!e)})}),H&&(0,s.jsxs)("div",{ref:et,className:"absolute right-2 top-10 z-50 bg-white border border-gray-200 shadow-md p-2 rounded-lg",onClick:e=>{e.stopPropagation()},children:[(0,s.jsx)("button",{className:"w-full text-left hover:bg-gray-100 p-2",onClick:()=>{J(!0),K(!1)},children:"Chỉnh sửa"}),(0,s.jsx)("button",{className:"w-full text-left hover:bg-gray-100 p-2",onClick:eh,children:"X\xf3a"})]})]}),X?(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",onClick:e=>{e.stopPropagation()},children:[(0,s.jsx)("textarea",{className:"w-full p-2 border rounded-lg",value:V,onChange:e=>q(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("button",{className:"px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600",onClick:eu,children:"Lưu"}),(0,s.jsx)("button",{className:"px-3 py-1 bg-gray-200 rounded-lg hover:bg-gray-300",onClick:()=>J(!1),children:"Hủy"})]})]}),$&&(0,s.jsx)("div",{className:"text-red-500 text-sm mt-2",children:$})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"cursor-pointer",onClick:()=>Y.push("/comment/".concat(t)),children:[(0,s.jsx)("p",{className:"mt-2",children:f}),$&&(0,s.jsx)("div",{className:"text-red-500 text-sm mt-2",children:$}),v&&(0,s.jsx)("img",{src:"".concat(v),alt:"Post",className:"mt-2 rounded-lg"}),y&&(0,s.jsx)("video",{src:"".concat(y),controls:!0,className:"mt-2 rounded-lg w-full"})]})}),(0,s.jsxs)("div",{className:"flex gap-4 text-gray-500 mt-3",children:[(0,s.jsx)(b,{icon:(0,s.jsx)(n.A,{size:18,className:T?"text-red-500":"text-gray-500"}),count:L,onClick:en}),(0,s.jsx)(b,{icon:(0,s.jsx)(c.A,{size:18}),count:I,onClick:()=>E(e=>!e)}),(0,s.jsx)(b,{icon:(0,s.jsx)(d.A,{size:18,className:F?"text-green-500":"text-gray-500"}),count:O,onClick:ec})]}),z&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:e=>{e.stopPropagation()},children:(0,s.jsxs)("div",{className:"bg-white w-[500px] rounded-xl shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border-b",children:[(0,s.jsx)("button",{className:"text-gray-600 hover:text-black",children:(0,s.jsx)(r.A,{size:20,onClick:()=>E(!1),className:"cursor-pointer"})}),(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Thread trả lời"}),(0,s.jsx)("button",{className:"text-gray-600 hover:text-black",children:(0,s.jsx)(i,{size:20})})]}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("img",{src:m&&!m.startsWith("http")?"http://127.0.0.1:8000/media/".concat(m):m||"https://placehold.co/40x40?text=".concat(p),alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"font-semibold text-sm",children:[p," ",(0,s.jsxs)("span",{className:"text-gray-500 text-xs",children:["• ",g]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-800",children:f})]})]})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("img",{src:m&&!m.startsWith("http")?"http://127.0.0.1:8000/media/".concat(m):m||"https://placehold.co/40x40?text=".concat(p),alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("input",{type:"text",placeholder:"Trả lời ".concat(p),className:"w-full border-none outline-none bg-transparent text-sm text-gray-800",value:D,onChange:e=>M(e.target.value)}),(0,s.jsxs)("div",{className:"flex space-x-3 text-gray-500 mt-2 items-center",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)(l.A,{size:18,className:"cursor-pointer hover:text-black"}),(0,s.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:e=>{var t;el((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)(o.A,{size:18,className:"cursor-pointer hover:text-black"}),(0,s.jsx)("input",{type:"file",accept:"video/*",style:{display:"none"},onChange:e=>{var t;ei((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]}),er&&(0,s.jsxs)("div",{className:"relative w-10 h-10",children:[(0,s.jsx)("img",{src:URL.createObjectURL(er),alt:"preview",className:"w-10 h-10 object-cover rounded"}),(0,s.jsx)("button",{type:"button",className:"absolute top-0 right-0 bg-white rounded-full p-0.5 text-xs text-red-500 border border-gray-300 hover:bg-gray-200",onClick:()=>el(null),children:"\xd7"})]}),eo&&(0,s.jsxs)("div",{className:"relative w-16 h-10",children:[(0,s.jsx)("video",{src:URL.createObjectURL(eo),className:"w-16 h-10 object-cover rounded",controls:!0}),(0,s.jsx)("button",{type:"button",className:"absolute top-0 right-0 bg-white rounded-full p-0.5 text-xs text-red-500 border border-gray-300 hover:bg-gray-200",onClick:()=>ei(null),children:"\xd7"})]})]})]})]})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("button",{className:"w-full py-2 rounded-lg ".concat(D.trim()?"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"),disabled:!D.trim(),onClick:ed,children:"Đăng"})})]})})]})}function b(e){let{icon:t,count:a,onClick:r}=e;return(0,s.jsxs)("button",{className:"flex items-center space-x-1 hover:text-black",onClick:e=>{e.stopPropagation(),null==r||r(e)},children:[t,(0,s.jsx)("span",{children:a})]})}},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7213:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},9803:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[244,324,441,684,358],()=>t(1689)),_N_E=e.O()}]);