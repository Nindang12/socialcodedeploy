(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},720:(e,s,t)=>{Promise.resolve().then(t.bind(t,8265))},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},8265:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(5155),l=t(4147),a=t.n(l),o=t(8489),n=t.n(o);t(347);var i=t(2115),c=t(6874),d=t.n(c);function h(){let[e,s]=(0,i.useState)(!1),[t,l]=(0,i.useState)(!1),[a,o]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=()=>{o(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.jsxs)("div",{className:"flex justify-center items-center relative",children:[(0,r.jsx)("button",{className:"hover:bg-slate-200 p-3 rounded-lg",onClick:()=>s(e=>!e),children:(0,r.jsx)("img",{width:20,src:"/assets/option-row.svg",alt:"option"})}),e&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>s(!1),children:(0,r.jsx)("div",{className:"absolute bg-white rounded-2xl shadow-lg p-4 ".concat(a?"bottom-0 left-0 right-0 rounded-t-2xl":"bottom-24 left-5 w-48"),onClick:e=>e.stopPropagation(),children:(0,r.jsx)("div",{className:"border-t",children:(0,r.jsx)("button",{className:"py-3 text-black w-full hover:bg-slate-200 rounded-lg",onClick:()=>{l(!1),console.log("Logging out..."),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",localStorage.removeItem("token"),localStorage.removeItem("lastLoginTime"),localStorage.removeItem("currentUser"),window.location.href="/login"},children:"Đăng xuất"})})})})]})}function u(){let[e,s]=(0,i.useState)(null),[t,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{{let e=()=>{l(localStorage.getItem("token"));try{let e=JSON.parse(localStorage.getItem("currentUser")||"null");s(e)}catch(e){console.error("Error parsing user from storage:",e),s(null)}};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}},[]),(0,i.useEffect)(()=>{t&&(async()=>{try{let e=await fetch("http://127.0.0.1:8000/users/me",{headers:{Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch user");let r=await e.json();localStorage.setItem("currentUser",JSON.stringify(r.user)),s(r.user)}catch(e){console.error("Error fetching user:",e),s(null)}})()},[t]),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex flex-col justify-between py-5 md:w-20 md:h-screen items-center bg-zinc-50 w-screen h-20",children:[(0,r.jsx)("img",{width:40,className:"hidden md:block",src:"/loom.png",alt:"logo"}),(0,r.jsxs)("div",{className:"flex md:flex-col md:gap-16 gap-5 flex-row",children:[(0,r.jsx)(d(),{href:"/",className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:22,src:"/assets/home.svg",alt:"home"})}),(0,r.jsx)(d(),{href:"/search",className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:22,src:"/assets/search.svg",alt:"search"})}),(0,r.jsx)(d(),{href:"/likepage",className:"hover:bg-slate-200 p-3 rounded-lg relative cursor-pointer",children:(0,r.jsx)("img",{width:22,src:"/assets/heart.svg",alt:"heart"})}),(null==e?void 0:e.user_id)&&(0,r.jsx)(d(),{href:"/profile/".concat(e.user_id),className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:20,src:"/assets/profile.svg",alt:"profile"})})]}),(0,r.jsx)("div",{className:"pb-10",children:(0,r.jsx)(h,{})})]})})}var g=t(5695);function m(e){let{children:s}=e,t=(0,g.useRouter)(),l=(0,g.usePathname)();return(0,i.useEffect)(()=>{localStorage.getItem("token")||"/login"===l||"/signup"===l||t.push("/login")},[t,l]),(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{className:"".concat(a().variable," ").concat(n().variable," antialiased"),children:(0,r.jsxs)("div",{className:"flex",children:["/login"!==l&&"/signup"!==l&&(0,r.jsx)(u,{}),s]})})})}},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{var s=s=>e(e.s=s);e.O(0,[896,244,441,684,358],()=>s(720)),_N_E=e.O()}]);