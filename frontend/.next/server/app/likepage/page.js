(()=>{var e={};e.id=275,e.ids=[275],e.modules={406:(e,t,s)=>{Promise.resolve().then(s.bind(s,8625))},440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(1658);let o=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},654:(e,t,s)=>{Promise.resolve().then(s.bind(s,5671))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},864:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6444,23)),Promise.resolve().then(s.t.bind(s,6042,23)),Promise.resolve().then(s.t.bind(s,8170,23)),Promise.resolve().then(s.t.bind(s,9477,23)),Promise.resolve().then(s.t.bind(s,9345,23)),Promise.resolve().then(s.t.bind(s,2089,23)),Promise.resolve().then(s.t.bind(s,6577,23)),Promise.resolve().then(s.t.bind(s,1307,23))},1630:e=>{"use strict";e.exports=require("http")},2412:e=>{"use strict";e.exports=require("assert")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4263:()=>{},4339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(687),o=s(6482),n=s.n(o),i=s(4716),a=s.n(i);s(4263);var l=s(3210),c=s(5814),d=s.n(c);function u(){let[e,t]=(0,l.useState)(!1),[s,o]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:"flex justify-center items-center relative",children:[(0,r.jsx)("button",{className:"hover:bg-slate-200 p-3 rounded-lg",onClick:()=>t(e=>!e),children:(0,r.jsx)("img",{width:20,src:"/assets/option-row.svg",alt:"option"})}),e&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>t(!1),children:(0,r.jsx)("div",{className:`absolute bg-white rounded-2xl shadow-lg p-4 ${n?"bottom-0 left-0 right-0 rounded-t-2xl":"bottom-24 left-5 w-48"}`,onClick:e=>e.stopPropagation(),children:(0,r.jsx)("div",{className:"border-t",children:(0,r.jsx)("button",{className:"py-3 text-black w-full hover:bg-slate-200 rounded-lg",onClick:()=>{o(!1),console.log("Logging out..."),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",localStorage.removeItem("token"),localStorage.removeItem("lastLoginTime"),localStorage.removeItem("currentUser"),window.location.href="/login"},children:"Đăng xuất"})})})})]})}function p(){let[e,t]=(0,l.useState)(null),[s,o]=(0,l.useState)(null);return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex flex-col justify-between py-5 md:w-20 md:h-screen items-center bg-zinc-50 w-screen h-20",children:[(0,r.jsx)("img",{width:40,className:"hidden md:block",src:"/loom.png",alt:"logo"}),(0,r.jsxs)("div",{className:"flex md:flex-col md:gap-16 gap-5 flex-row",children:[(0,r.jsx)(d(),{href:"/",className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:22,src:"/assets/home.svg",alt:"home"})}),(0,r.jsx)(d(),{href:"/search",className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:22,src:"/assets/search.svg",alt:"search"})}),(0,r.jsx)(d(),{href:"/likepage",className:"hover:bg-slate-200 p-3 rounded-lg relative cursor-pointer",children:(0,r.jsx)("img",{width:22,src:"/assets/heart.svg",alt:"heart"})}),e?.user_id&&(0,r.jsx)(d(),{href:`/profile/${e.user_id}`,className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:20,src:"/assets/profile.svg",alt:"profile"})})]}),(0,r.jsx)("div",{className:"pb-10",children:(0,r.jsx)(u,{})})]})})}var m=s(6189);function h({children:e}){(0,m.useRouter)();let t=(0,m.usePathname)();return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{className:`${n().variable} ${a().variable} antialiased`,children:(0,r.jsxs)("div",{className:"flex",children:["/login"!==t&&"/signup"!==t&&(0,r.jsx)(p,{}),e]})})})}},4416:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6346,23)),Promise.resolve().then(s.t.bind(s,7924,23)),Promise.resolve().then(s.t.bind(s,5656,23)),Promise.resolve().then(s.t.bind(s,99,23)),Promise.resolve().then(s.t.bind(s,8243,23)),Promise.resolve().then(s.t.bind(s,8827,23)),Promise.resolve().then(s.t.bind(s,2763,23)),Promise.resolve().then(s.t.bind(s,7173,23))},4431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/layout.tsx","default")},4647:()=>{},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/likepage/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/likepage/page.tsx","default")},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},8625:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(687),o=s(3210),n=s(6189);s(1060);var i=s(7760),a=s(3872),l=s(8133);function c(){(0,n.useRouter)();let[e,t]=(0,o.useState)([]),[s,i]=(0,o.useState)(!0);return(0,r.jsxs)("div",{className:"w-full h-screen bg-gray-100 flex flex-col items-center p-4",children:[(0,r.jsx)("h1",{className:"text-xl text-black font-bold mb-4",children:"B\xe0i viết đ\xe3 th\xedch"}),(0,r.jsx)("div",{className:"max-w-xl w-full h-auto",children:(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-md p-4 space-y-4",children:(0,r.jsx)("div",{className:"space-y-4 max-h-[85vh] overflow-y-auto",children:s?(0,r.jsx)("div",{className:"text-center py-4",children:"Đang tải..."}):0===e.length?(0,r.jsx)("div",{className:"text-center",children:"Bạn chưa th\xedch b\xe0i viết n\xe0o"}):e.map(e=>(0,r.jsx)(d,{...e,setLocalPosts:t,currentUser:JSON.parse(localStorage.getItem("currentUser")||"{}")},e._id||e.post_id))})})})]})}function d({post_id:e,user_id:t,avatar:s,username:c,time:d,content:p,image:m,video:h,likes:x,comments:g,reposts:v,saves:f,liked_by:b=[],reposted_by:j=[],created_at:w,setLocalPosts:N,currentUser:k}){let[y,P]=(0,o.useState)(!1),[S,C]=(0,o.useState)(!1),[_,q]=(0,o.useState)(x),[A,z]=(0,o.useState)(!1),[D,$]=(0,o.useState)(v),[E,M]=(0,o.useState)(""),[R,G]=(0,o.useState)(g),[I,T]=(0,o.useState)(!1),[L,U]=(0,o.useState)(!1),[B,J]=(0,o.useState)(p),[O,K]=(0,o.useState)(!1),X=(0,n.useRouter)(),[F,H]=(0,o.useState)("");(0,o.useRef)(null);let[Q,V]=(0,o.useState)(!1),[W,Y]=(0,o.useState)(null),[Z,ee]=(0,o.useState)(null),et=async()=>{try{return}catch(e){console.error("Error liking post:",e)}},es=async()=>{try{return}catch(e){console.error("Error reposting:",e)}};return(0,r.jsxs)("div",{className:"bg-white text-black p-4 shadow-md w-full rounded-lg border",children:[(0,r.jsx)("div",{className:"flex justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("img",{src:s?`http://127.0.0.1:8000/media/${s}`:"https://placehold.co/40x40",alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:c||t}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:d||(w?function(e){let t=new Date,s=new Date(e),r=Math.floor((t.getTime()-s.getTime())/6e4);if(r<60)return`${r} ph\xfat`;if(r<1440){let e=Math.floor(r/60);return`${e} giờ`}{let e=Math.floor(r/1440);return`${e} ng\xe0y`}}(w):"")})]})]})}),(0,r.jsxs)("div",{onClick:()=>X.push(`/comment/${e}`),children:[(0,r.jsx)("p",{className:"mt-2",children:p}),m&&(0,r.jsx)("img",{src:m,alt:"Post",className:"mt-2 rounded-lg"}),h&&(0,r.jsx)("video",{src:h,controls:!0,className:"mt-2 rounded-lg w-full"})]}),(0,r.jsxs)("div",{className:"flex gap-4 text-gray-500 mt-3",children:[(0,r.jsx)(u,{icon:(0,r.jsx)(i.A,{size:18,className:S?"text-red-500":"text-gray-500"}),count:_,onClick:et}),(0,r.jsx)(u,{icon:(0,r.jsx)(a.A,{size:18}),count:R,onClick:()=>P(e=>!e)}),(0,r.jsx)(u,{icon:(0,r.jsx)(l.A,{size:18,className:A?"text-green-500":"text-gray-500"}),count:D,onClick:es})]})]})}function u({icon:e,count:t,onClick:s}){return(0,r.jsxs)("button",{className:"flex items-center space-x-1 hover:text-black",onClick:e=>{e.stopPropagation(),s?.(e)},children:[e,(0,r.jsx)("span",{children:t})]})}},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9624:(e,t,s)=>{Promise.resolve().then(s.bind(s,4339))},9714:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(5239),o=s(8088),n=s(8170),i=s.n(n),a=s(893),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);s.d(t,l);let c={children:["",{children:["likepage",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5671)),"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/likepage/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/likepage/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/likepage/page",pathname:"/likepage",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9896:(e,t,s)=>{Promise.resolve().then(s.bind(s,4431))}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,240,658,832],()=>s(9714));module.exports=r})();