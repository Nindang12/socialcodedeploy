(()=>{var e={};e.id=519,e.ids=[519],e.modules={440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(1658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},864:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6444,23)),Promise.resolve().then(s.t.bind(s,6042,23)),Promise.resolve().then(s.t.bind(s,8170,23)),Promise.resolve().then(s.t.bind(s,9477,23)),Promise.resolve().then(s.t.bind(s,9345,23)),Promise.resolve().then(s.t.bind(s,2089,23)),Promise.resolve().then(s.t.bind(s,6577,23)),Promise.resolve().then(s.t.bind(s,1307,23))},1119:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/profile/[userId]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/profile/[userId]/page.tsx","default")},1630:e=>{"use strict";e.exports=require("http")},1860:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2412:e=>{"use strict";e.exports=require("assert")},2943:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3607:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(687),a=s(5814),l=s.n(a),i=s(6189),n=s(7760),o=s(3872),d=s(8133),c=s(1860),m=s(9005),u=s(2943);let h=(0,s(2688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var p=s(3210),x=s(1060);function g(){(0,i.useRouter)();let e=(0,i.useParams)().userId,t=e=>{let t=new Date,s=new Date(e),r=Math.floor((t.getTime()-s.getTime())/6e4);if(r<60)return`${r} ph\xfat`;if(r<1440){let e=Math.floor(r/60);return`${e} giờ`}{let e=Math.floor(r/1440);return`${e} ng\xe0y`}},[s,a]=(0,p.useState)("posts"),[g,b]=(0,p.useState)(!1),[f,v]=(0,p.useState)(null),[j,y]=(0,p.useState)([]),[N,w]=(0,p.useState)([]),[_,k]=(0,p.useState)(!0),[A,S]=(0,p.useState)(null),[$,C]=(0,p.useState)(!1),[P,z]=(0,p.useState)({full_name:f?.full_name||"",phone_number:f?.phone_number||"",username:f?.username||"",email:f?.email||"",bio:f?.bio||"",avatar:null}),[I,T]=(0,p.useState)(!1),[q,D]=(0,p.useState)([]),B=async()=>{k(!0);try{let t=localStorage.getItem("token"),s=await x.A.get(`http://127.0.0.1:8000/users/${e}`,{headers:{Authorization:`Bearer ${t}`}});v(s.data.user);let r=await x.A.get(`http://127.0.0.1:8000/users/${e}/posts`,{headers:{Authorization:`Bearer ${t}`}});y(r.data.posts);let a=(await x.A.get(`http://127.0.0.1:8000/comments/user/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,l=[...new Set(a.map(e=>e.post_id))],i=(await Promise.all(l.map(async e=>{try{let s=(await x.A.get(`http://127.0.0.1:8000/posts/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,r=await x.A.get(`http://127.0.0.1:8000/users/${s.user_id}`,{headers:{Authorization:`Bearer ${t}`}}),l=a.filter(t=>t.post_id===e);return{...s,userComments:l,user:r.data.user}}catch(t){return console.error(`Error fetching post ${e}:`,t),null}}))).filter(Boolean).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());w(i);let n=(await x.A.get("http://127.0.0.1:8000/posts",{headers:{Authorization:`Bearer ${t}`}})).data.filter(t=>Array.isArray(t.reposted_by)&&t.reposted_by.map(e=>String(e).trim()).includes(String(e).trim())),o=(await Promise.all(n.map(async e=>{try{let s=await x.A.get(`http://127.0.0.1:8000/users/${e.user_id}`,{headers:{Authorization:`Bearer ${t}`}});return{...e,user:s.data.user}}catch(t){return console.error(`Error fetching user for post ${e.post_id}:`,t),e}}))).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());D(o)}catch(e){console.error("Error fetching profile data:",e),v(null),y([]),w([]),D([])}finally{k(!1)}},E=({post:e,onActionDone:s})=>{let a=!!Array.isArray(e.liked_by)&&!!A&&e.liked_by.map(e=>String(e).trim()).includes(String(A.user_id).trim()),[i,h]=(0,p.useState)(a),[x,g]=(0,p.useState)(e.likes??0),b=!!Array.isArray(e.reposted_by)&&!!A&&e.reposted_by.map(e=>String(e).trim()).includes(String(A.user_id).trim()),[v,j]=(0,p.useState)(b),[y,N]=(0,p.useState)(e.reposts??0),[w,_]=(0,p.useState)(!1),[k,S]=(0,p.useState)(""),[$,C]=(0,p.useState)(null),[P,z]=(0,p.useState)(null);e.created_at,(0,p.useEffect)(()=>{h(!!Array.isArray(e.liked_by)&&!!A&&e.liked_by.map(e=>String(e).trim()).includes(String(A.user_id).trim())),j(!!Array.isArray(e.reposted_by)&&!!A&&e.reposted_by.map(e=>String(e).trim()).includes(String(A.user_id).trim()))},[e.liked_by,e.reposted_by,A]);let I=async()=>{try{let t=localStorage.getItem("token");(await fetch(`http://127.0.0.1:8000/posts/${e.post_id}/like`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok&&(h(!i),g(e=>i?e-1:e+1),await s())}catch(e){console.error("Error liking post:",e)}},T=async()=>{try{let t=localStorage.getItem("token");(await fetch(`http://127.0.0.1:8000/posts/${e.post_id}/repost`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok&&(j(!v),N(e=>v?e-1:e+1),await s())}catch(e){console.error("Error reposting:",e)}},q=async()=>{if(k.trim())try{let t=localStorage.getItem("token"),r=new FormData;r.append("content",k),$&&r.append("image",$),P&&r.append("video",P),(await fetch(`http://127.0.0.1:8000/posts/${e.post_id}/comments`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:r})).ok&&(S(""),C(null),z(null),_(!1),await s())}catch(e){console.error("Error posting comment:",e)}};return(0,r.jsxs)("div",{className:"bg-white text-black p-4 shadow-md w-full rounded-lg border ",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("img",{src:f?.avatar?`http://127.0.0.1:8000/media/${f.avatar}`:"https://placehold.co/40x40",alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-semibold",children:f?.full_name||"Người d\xf9ng"}),(0,r.jsx)(l(),{href:`/profile/${f?.user_id}`,children:(0,r.jsxs)("span",{className:"text-sm text-blue-500 hover:underline cursor-pointer",children:["@",f?.username||""]})}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:t(e.created_at)})]})})]}),(0,r.jsx)("p",{className:"mt-2",children:e.content}),e.image_id&&(0,r.jsx)("img",{src:`http://127.0.0.1:8000/media/${e.image_id}`,alt:"Post",className:"mt-2 rounded-lg"}),e.images&&e.images.length>0&&(0,r.jsx)("img",{src:e.images[0],alt:"Post",className:"mt-2 rounded-lg"}),(0,r.jsxs)("div",{className:"flex gap-4 text-gray-500 mt-3",children:[(0,r.jsx)(L,{icon:(0,r.jsx)(n.A,{size:18,className:i?"text-red-500":"text-gray-500"}),count:x,onClick:I}),(0,r.jsx)(L,{icon:(0,r.jsx)(o.A,{size:18}),count:e.replies??0,onClick:()=>_(e=>!e)}),(0,r.jsx)(L,{icon:(0,r.jsx)(d.A,{size:18,className:v?"text-green-500":"text-gray-500"}),count:y,onClick:T})]}),w&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50",children:(0,r.jsxs)("div",{className:"bg-white w-[500px] rounded-xl shadow-lg translate-x-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border-b",children:[(0,r.jsx)("button",{className:"text-gray-600 hover:text-black",children:(0,r.jsx)(c.A,{size:20,onClick:()=>_(!1),className:"cursor-pointer"})}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:"Thread trả lời"}),(0,r.jsx)("div",{})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("img",{src:f?.avatar?`http://127.0.0.1:8000/media/${f.avatar}`:"https://placehold.co/40x40",alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("p",{className:"font-semibold text-sm",children:[f?.full_name||"Người d\xf9ng"," ",(0,r.jsxs)("span",{className:"text-gray-500 text-xs",children:["• ",e.created_at?new Date(e.created_at).toLocaleDateString("vi-VN"):""]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-800",children:e.content})]})]})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("img",{src:"https://placehold.co/40x40",alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("input",{type:"text",placeholder:`Trả lời ${f?.full_name||"người d\xf9ng"}`,className:"w-full border-none outline-none bg-transparent text-sm text-gray-800",value:k,onChange:e=>S(e.target.value)}),(0,r.jsxs)("div",{className:"flex space-x-3 text-gray-500 mt-2 items-center",children:[(0,r.jsxs)("label",{children:[(0,r.jsx)(m.A,{size:18,className:"cursor-pointer hover:text-black"}),(0,r.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:e=>{C(e.target.files?.[0]||null)}})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)(u.A,{size:18,className:"cursor-pointer hover:text-black"}),(0,r.jsx)("input",{type:"file",accept:"video/*",style:{display:"none"},onChange:e=>{z(e.target.files?.[0]||null)}})]}),$&&(0,r.jsxs)("div",{className:"relative w-10 h-10",children:[(0,r.jsx)("img",{src:URL.createObjectURL($),alt:"preview",className:"w-10 h-10 object-cover rounded"}),(0,r.jsx)("button",{type:"button",className:"absolute top-0 right-0 bg-white rounded-full p-0.5 text-xs text-red-500 border border-gray-300 hover:bg-gray-200",onClick:()=>C(null),children:"\xd7"})]}),P&&(0,r.jsxs)("div",{className:"relative w-16 h-10",children:[(0,r.jsx)("video",{src:URL.createObjectURL(P),className:"w-16 h-10 object-cover rounded",controls:!0}),(0,r.jsx)("button",{type:"button",className:"absolute top-0 right-0 bg-white rounded-full p-0.5 text-xs text-red-500 border border-gray-300 hover:bg-gray-200",onClick:()=>z(null),children:"\xd7"})]})]})]})]})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("button",{className:`w-full py-2 rounded-lg ${k.trim()?"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!k.trim(),onClick:q,children:"Đăng"})})]})})]},e.post_id)},L=({icon:e,count:t,onClick:s})=>(0,r.jsxs)("button",{className:"flex items-center space-x-2 hover:text-blue-500",onClick:s,children:[e,(0,r.jsx)("span",{children:t})]}),R=e=>{a(e)},M=async()=>{try{let t=localStorage.getItem("token");(await fetch(`http://127.0.0.1:8000/users/${e}/${g?"unfollow":"follow"}`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok&&(b(!g),await B())}catch(e){console.error("Error following/unfollowing user:",e)}},U=async()=>{T(!0);try{let t=localStorage.getItem("token"),s=new FormData;s.append("full_name",P.full_name),s.append("phone_number",P.phone_number),s.append("username",P.username),s.append("email",P.email),s.append("bio",P.bio),P.avatar&&s.append("avatar",P.avatar);let r=await fetch(`http://127.0.0.1:8000/users/${e}/update`,{method:"PUT",headers:{Authorization:`Bearer ${t}`},body:s});if(!r.ok)throw Error("Cập nhật thất bại");let a=await r.json();v(a.user),C(!1)}catch(e){alert("C\xf3 lỗi xảy ra khi cập nhật hồ sơ!")}finally{T(!1)}};return _||f||(0,i.notFound)(),(0,r.jsxs)("div",{className:"w-full h-screen bg-gray-100 flex flex-col items-center p-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Hồ sơ"}),(0,r.jsx)("div",{className:"max-w-xl w-full h-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("img",{src:f?.avatar?`http://127.0.0.1:8000/media/${f.avatar}`:"https://placehold.co/100x100",alt:"Avatar",className:"w-20 h-20 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:f?.full_name||"username"}),(0,r.jsxs)("p",{className:"text-gray-500",children:["@",f?.username||"username"]}),(0,r.jsx)("p",{className:"text-gray-500",children:f?.bio||"Bio"}),A?.user_id===e&&(0,r.jsx)(h,{size:18,className:"cursor-pointer hover:text-blue-500",onClick:()=>C(!0)}),(0,r.jsxs)("div",{className:"flex space-x-4 mt-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-bold",children:Array.isArray(j)?j.length:0})," b\xe0i viết"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-bold",children:f?.followers?.length||0})," người theo d\xf5i"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-bold",children:f?.following?.length||0})," đang theo d\xf5i"]})]})]}),A?.user_id!==e&&(0,r.jsx)("button",{className:`px-4 py-2 rounded-lg font-semibold ${g?"bg-gray-200 hover:bg-gray-300 text-gray-800":"bg-blue-500 hover:bg-blue-600 text-white"}`,onClick:M,children:g?"Đang theo d\xf5i":"Theo d\xf5i"})]}),(0,r.jsxs)("div",{className:"flex border-b",children:[(0,r.jsx)("button",{className:`px-4 py-2 ${"posts"===s?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"}`,onClick:()=>R("posts"),children:"B\xe0i viết"}),(0,r.jsx)("button",{className:`px-4 py-2 ${"replies"===s?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"}`,onClick:()=>R("replies"),children:"Trả lời"}),(0,r.jsx)("button",{className:`px-4 py-2 ${"reposts"===s?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"}`,onClick:()=>R("reposts"),children:"Đăng lại"})]}),(0,r.jsxs)("div",{className:"space-y-4 overflow-auto max-h-[calc(100vh-290px)]",children:["posts"===s&&(Array.isArray(j)&&j.length>0?j.map(e=>(0,r.jsx)(E,{post:e,onActionDone:B},e.post_id)):(0,r.jsx)("div",{className:"py-8 text-center text-gray-500",children:"Kh\xf4ng c\xf3 b\xe0i viết n\xe0o."})),"replies"===s&&(Array.isArray(N)&&N.length>0?N.map(e=>(0,r.jsxs)("div",{className:"bg-white text-black p-4 shadow-md w-full rounded-lg border",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("img",{src:e.user?.avatar?`http://127.0.0.1:8000/media/${e.user.avatar}`:"https://placehold.co/40x40",alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-semibold",children:e.user?.full_name||"Người d\xf9ng"}),(0,r.jsx)(l(),{href:`/profile/${e.user?.user_id}`,children:(0,r.jsxs)("span",{className:"text-sm text-blue-500 hover:underline cursor-pointer",children:["@",e.user?.username||""]})}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:t(e.created_at)})]})})]}),(0,r.jsx)(l(),{href:`/comment/${e.post_id}`,children:(0,r.jsx)("p",{className:"mt-2",children:e.content})}),e.image_id&&(0,r.jsx)("img",{src:`http://127.0.0.1:8000/media/${e.image_id}`,alt:"Post",className:"mt-2 rounded-lg"}),e.userComments?.map(e=>r.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("img",{src:f?.avatar?`http://127.0.0.1:8000/media/${f.avatar}`:"https://placehold.co/40x40",alt:"Avatar",className:"w-8 h-8 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:f?.full_name||"Người d\xf9ng"}),r.jsx("p",{className:"text-xs text-gray-500",children:t(e.created_at)})]})]}),r.jsx("p",{className:"mt-2 text-sm",children:e.content}),e.image_id&&r.jsx("img",{src:`http://127.0.0.1:8000/media/${e.image_id}`,alt:"Comment",className:"mt-2 rounded-lg max-h-40 object-cover"})]},e.comment_id))]},e.post_id)):(0,r.jsx)("div",{className:"py-8 text-center text-gray-500",children:"Kh\xf4ng c\xf3 trả lời n\xe0o."})),"reposts"===s&&(Array.isArray(q)&&q.length>0?q.map(e=>(0,r.jsxs)("div",{className:"bg-white text-black p-4 shadow-md w-full rounded-lg border",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("img",{src:e.user?.avatar?`http://127.0.0.1:8000/media/${e.user.avatar}`:"https://placehold.co/40x40",alt:"Avatar",className:"w-10 h-10 rounded-full"}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-semibold",children:e.user?.full_name||"Người d\xf9ng"}),(0,r.jsx)(l(),{href:`/profile/${e.user?.user_id}`,children:(0,r.jsxs)("span",{className:"text-sm text-blue-500 hover:underline cursor-pointer",children:["@",e.user?.username||""]})}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:t(e.created_at)})]})})]}),(0,r.jsx)(l(),{href:`/comment/${e.post_id}`,children:(0,r.jsx)("p",{className:"mt-2",children:e.content})}),e.image_id&&(0,r.jsx)("img",{src:`http://127.0.0.1:8000/media/${e.image_id}`,alt:"Post",className:"mt-2 rounded-lg"}),e.video_id&&(0,r.jsx)("video",{src:`http://127.0.0.1:8000/media/${e.video_id}`,controls:!0,className:"mt-2 rounded-lg w-full"}),(0,r.jsxs)("div",{className:"flex gap-4 text-gray-500 mt-3",children:[(0,r.jsx)(L,{icon:(0,r.jsx)(n.A,{size:18,className:e.liked_by?.includes(A?.user_id)?"text-red-500":"text-gray-500"}),count:e.likes||0,onClick:()=>{}}),(0,r.jsx)(L,{icon:(0,r.jsx)(o.A,{size:18}),count:e.comments||0,onClick:()=>{}}),(0,r.jsx)(L,{icon:(0,r.jsx)(d.A,{size:18,className:"text-green-500"}),count:e.reposts||0,onClick:()=>{}})]})]},e.post_id)):(0,r.jsx)("div",{className:"py-8 text-center text-gray-500",children:"Kh\xf4ng c\xf3 b\xe0i đăng lại n\xe0o."}))]})]})}),$&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg w-[400px]",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Chỉnh sửa hồ sơ"}),(0,r.jsx)("input",{className:"w-full mb-2 p-2 border rounded",placeholder:"Họ t\xean",value:P.full_name,onChange:e=>z({...P,full_name:e.target.value})}),(0,r.jsx)("input",{className:"w-full mb-2 p-2 border rounded",placeholder:"Số điện thoại",value:P.phone_number,onChange:e=>z({...P,phone_number:e.target.value})}),(0,r.jsx)("input",{className:"w-full mb-2 p-2 border rounded",placeholder:"Username",value:P.username,onChange:e=>z({...P,username:e.target.value})}),(0,r.jsx)("input",{className:"w-full mb-2 p-2 border rounded",placeholder:"Email",value:P.email,onChange:e=>z({...P,email:e.target.value})}),(0,r.jsx)("textarea",{className:"w-full mb-2 p-2 border rounded",placeholder:"Bio",value:P.bio,onChange:e=>z({...P,bio:e.target.value})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2 p-2 border rounded cursor-pointer",children:[(0,r.jsx)(m.A,{size:18,className:"cursor-pointer hover:text-black"}),(0,r.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"avatar-upload",onChange:e=>z({...P,avatar:e.target.files?.[0]||null})}),(0,r.jsx)("label",{htmlFor:"avatar-upload",className:"cursor-pointer",children:"Chọn ảnh đại diện"}),P.avatar&&(0,r.jsxs)("div",{className:"relative w-10 h-10 ml-2",children:[(0,r.jsx)("img",{src:URL.createObjectURL(P.avatar),alt:"Avatar preview",className:"w-10 h-10 object-cover rounded-full"}),(0,r.jsx)("button",{type:"button",className:"absolute -top-1 -right-1 bg-white rounded-full p-0.5 text-xs text-red-500 border border-gray-300 hover:bg-gray-200",onClick:()=>z({...P,avatar:null}),children:"\xd7"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>C(!1),children:"Hủy"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded",onClick:U,disabled:I,children:I?"Đang lưu...":"Lưu"})]})]})})]})}},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4106:(e,t,s)=>{Promise.resolve().then(s.bind(s,1119))},4263:()=>{},4339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(687),a=s(6482),l=s.n(a),i=s(4716),n=s.n(i);s(4263);var o=s(3210),d=s(5814),c=s.n(d);function m(){let[e,t]=(0,o.useState)(!1),[s,a]=(0,o.useState)(!1),[l,i]=(0,o.useState)(!1);return(0,r.jsxs)("div",{className:"flex justify-center items-center relative",children:[(0,r.jsx)("button",{className:"hover:bg-slate-200 p-3 rounded-lg",onClick:()=>t(e=>!e),children:(0,r.jsx)("img",{width:20,src:"/assets/option-row.svg",alt:"option"})}),e&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>t(!1),children:(0,r.jsx)("div",{className:`absolute bg-white rounded-2xl shadow-lg p-4 ${l?"bottom-0 left-0 right-0 rounded-t-2xl":"bottom-24 left-5 w-48"}`,onClick:e=>e.stopPropagation(),children:(0,r.jsx)("div",{className:"border-t",children:(0,r.jsx)("button",{className:"py-3 text-black w-full hover:bg-slate-200 rounded-lg",onClick:()=>{a(!1),console.log("Logging out..."),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",localStorage.removeItem("token"),localStorage.removeItem("lastLoginTime"),localStorage.removeItem("currentUser"),window.location.href="/login"},children:"Đăng xuất"})})})})]})}function u(){let[e,t]=(0,o.useState)(null),[s,a]=(0,o.useState)(null);return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex flex-col justify-between py-5 md:w-20 md:h-screen items-center bg-zinc-50 w-screen h-20",children:[(0,r.jsx)("img",{width:40,className:"hidden md:block",src:"/loom.png",alt:"logo"}),(0,r.jsxs)("div",{className:"flex md:flex-col md:gap-16 gap-5 flex-row",children:[(0,r.jsx)(c(),{href:"/",className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:22,src:"/assets/home.svg",alt:"home"})}),(0,r.jsx)(c(),{href:"/search",className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:22,src:"/assets/search.svg",alt:"search"})}),(0,r.jsx)(c(),{href:"/likepage",className:"hover:bg-slate-200 p-3 rounded-lg relative cursor-pointer",children:(0,r.jsx)("img",{width:22,src:"/assets/heart.svg",alt:"heart"})}),e?.user_id&&(0,r.jsx)(c(),{href:`/profile/${e.user_id}`,className:"hover:bg-slate-200 p-3 rounded-lg",children:(0,r.jsx)("img",{width:20,src:"/assets/profile.svg",alt:"profile"})})]}),(0,r.jsx)("div",{className:"pb-10",children:(0,r.jsx)(m,{})})]})})}var h=s(6189);function p({children:e}){(0,h.useRouter)();let t=(0,h.usePathname)();return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{className:`${l().variable} ${n().variable} antialiased`,children:(0,r.jsxs)("div",{className:"flex",children:["/login"!==t&&"/signup"!==t&&(0,r.jsx)(u,{}),e]})})})}},4416:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6346,23)),Promise.resolve().then(s.t.bind(s,7924,23)),Promise.resolve().then(s.t.bind(s,5656,23)),Promise.resolve().then(s.t.bind(s,99,23)),Promise.resolve().then(s.t.bind(s,8243,23)),Promise.resolve().then(s.t.bind(s,8827,23)),Promise.resolve().then(s.t.bind(s,2763,23)),Promise.resolve().then(s.t.bind(s,7173,23))},4431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/layout.tsx","default")},4647:()=>{},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},8386:(e,t,s)=>{Promise.resolve().then(s.bind(s,3607))},9005:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9510:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(5239),a=s(8088),l=s(8170),i=s.n(l),n=s(893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d={children:["",{children:["profile",{children:["[userId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1119)),"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/profile/[userId]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/nin/Documents/SocialNetworkdeploy/frontend/src/app/profile/[userId]/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/profile/[userId]/page",pathname:"/profile/[userId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9551:e=>{"use strict";e.exports=require("url")},9624:(e,t,s)=>{Promise.resolve().then(s.bind(s,4339))},9896:(e,t,s)=>{Promise.resolve().then(s.bind(s,4431))}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,240,658,832],()=>s(9510));module.exports=r})();